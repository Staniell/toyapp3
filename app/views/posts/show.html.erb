<div class="flex flex-col">
    <div class="lg:w-1/2 m-auto mt-5 bg-slate-50">
        <h1 class="text-2xl border-2 text-center p-3 font-bold"><%= @post.title %></h1>
        <p class="p-5 text-center"><%= @post.body %></p>
    </div>
    <p class="lg:w-1/2 m-auto mt-2">By: <%= link_to @post.user.name, user_path(@post.user), class:"font-bold hover:text-blue-500" %></p>
    <div class="lg:w-1/2 m-auto mt-5">
    <% if current_user %>
        <h2>Add Comment</h2>
        <%= form_for [@post, @post.comments.build] do |f| %>
            <div class="flex flex-col">
                <%= f.hidden_field :user_id, value: current_user.id %>
                <%= f.text_area :body, class: "mt-3 p-2 w-11/12 bg-slate-100 border-2 shadow-md m-auto" %>
                <%= f.submit "Save", class:"mt-6 hover:shadow-md hover:cursor-pointer lg:w-1/4 m-auto p-2 rounder-md bg-slate-300" %>
            </div>
        <% end %>
    <% end %>
    </div>   
    <div class="lg:w-1/2 m-auto mt-5">
        <h1 class="mb-3 font-bold">Comments</h1>
        <% @post.comments.each_with_index  do |comment, index| %>
            <% if index+1 != @post.comments.length %>
            <div class="p-2 bg-slate-50 border-2 bg-slate-100 flex">
                <p><%= "#{comment.user.name}" %>: <%= comment.body %></p>
            <% if current_user && current_user.id == comment.user.id %>
                <div class="flex text-sm">
                    <%= link_to "Edit", edit_comment_path(comment), class: "p-1 mr-2 ml-4 text-blue-500 border-2 rounder-md bg-blue-100" %>
                    <%= link_to 'Delete', comment_path(comment), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: "p-1 text-red-500 border-2 rounder-md bg-red-100" %>
                </div>
            <% end %>
            </div>
            <% end %>
        <% end %>
    </div>
</div> 